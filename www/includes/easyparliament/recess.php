<?php

/**
 * @file
 * Recess.php 2004-06-05
 * francis@flourish.org
 */

/* Australian Parliament */
$GLOBALS['recessdates'][1] = [
    ['2007-12-07', '2008-02-11'],
    ['2008-02-23', '2008-03-10'],
    ['2008-03-21', '2008-05-12'],
    ['2008-05-17', '2008-05-25'],
    ['2008-06-07', '2008-06-15'],
    ['2008-06-27', '2008-08-25'],
    ['2008-09-06', '2008-09-14'],
    ['2008-09-27', '2008-10-12'],
    ['2008-10-18', '2008-11-09'],
    ['2008-11-15', '2008-11-23'],
    ['2008-12-05', '2009-02-02'],
    ['2009-02-13', '2009-02-22'],
    ['2009-02-27', '2009-03-09'],
    ['2009-03-20', '2009-05-11'],
    ['2009-05-15', '2009-05-24'],
    ['2009-06-05', '2009-06-14'],
    ['2009-06-26', '2009-08-10'],
    ['2009-08-21', '2009-09-06'],
    ['2009-09-18', '2009-10-18'],
    ['2009-10-30', '2009-11-15'],
    ['2009-12-03', '2010-02-01'],
    ['2010-02-12', '2010-02-21'],
    ['2010-02-26', '2010-03-08'],
    ['2010-03-19', '2010-05-10'],
    ['2010-05-14', '2010-05-23'],
    ['2010-06-04', '2010-06-14'],
    ['2010-06-25', '2010-09-27'],
    ['2010-10-01', '2010-10-17'],
    ['2010-10-29', '2010-11-14'],
    ['2010-11-26', '2010-12-31'],
    ['2011-01-01', '2011-02-07'],
    ['2011-02-11', '2011-02-20'],
    ['2011-03-04', '2011-03-20'],
    ['2011-03-25', '2011-05-09'],
    ['2011-05-13', '2011-05-22'],
    ['2011-06-03', '2011-06-13'],
    ['2011-06-24', '2011-07-03'],
    ['2011-07-08', '2011-08-15'],
    ['2011-08-26', '2011-09-11'],
    ['2011-09-23', '2011-10-10'],
    ['2011-10-21', '2011-10-30'],
    ['2011-11-04', '2011-11-20'],
    ['2011-12-01', '2011-12-31'],
    ['2012-01-01', '2012-02-06'],
    ['2012-02-17', '2012-02-26'],
    ['2012-03-02', '2012-03-12'],
    ['2012-03-23', '2012-05-07'],
    ['2012-05-11', '2012-05-20'],
    ['2012-06-01', '2012-06-17'],
    ['2012-06-29', '2012-08-13'],
    ['2012-08-24', '2012-09-09'],
    ['2012-09-21', '2012-10-08'],
    ['2012-10-19', '2012-10-28'],
    ['2012-11-02', '2012-11-18'],
    ['2012-11-30', '2013-02-04'],
    ['2013-02-15', '2013-02-24'],
    ['2013-03-01', '2013-03-11'],
    ['2013-03-22', '2013-05-13'],
    ['2013-05-17', '2013-05-26'],
    ['2013-06-07', '2013-06-16'],
    ['2013-06-28', '2013-11-11'],
    ['2013-11-22', '2013-12-01'],
    ['2013-12-13', '2014-02-10'],
    ['2014-02-14', '2014-02-23'],
    ['2014-03-07', '2014-03-16'],
    ['2014-03-28', '2014-05-12'],
    ['2014-05-16', '2014-05-25'],
    ['2014-06-06', '2014-06-15'],
    ['2014-06-27', '2014-07-06'],
    ['2014-07-18', '2014-08-25'],
    ['2014-09-05', '2014-09-21'],
    ['2014-10-03', '2014-10-19'],
    ['2014-10-31', '2014-11-23'],
    ['2014-12-05', '2015-02-08'],
    ['2015-02-13', '2015-02-22'],
    ['2015-03-06', '2015-03-15'],
    ['2015-03-27', '2015-05-11'],
    ['2015-05-15', '2015-05-24'],
    ['2015-06-05', '2015-06-14'],
    ['2015-06-26', '2015-08-09'],
    ['2015-08-21', '2015-09-06'],
    ['2015-09-18', '2015-10-11'],
    ['2015-10-23', '2015-11-08'],
    ['2015-11-13', '2015-11-22'],
    ['2015-12-04', '2016-02-01'],
    ['2016-02-12', '2016-02-21'],
    ['2016-03-04', '2016-03-14'],
    ['2016-03-18', '2016-04-17'],
    ['2016-04-20', '2016-05-01'],
    ['2016-05-07', '2016-08-29'],
    ['2016-09-02', '2016-09-11'],
    ['2016-09-16', '2016-10-09'],
    ['2016-10-21', '2016-11-06'],
    ['2016-11-11', '2016-11-20'],
    ['2016-12-02', '2016-12-31'],
    ['2017-01-01', '2017-02-06'],
    ['2017-02-17', '2017-02-26'],
    ['2017-03-03', '2017-03-19'],
    ['2017-03-31', '2017-05-08'],
    ['2017-05-12', '2017-05-21'],
    ['2017-06-02', '2017-06-12'],
    ['2017-06-23', '2017-08-07'],
    ['2017-08-18', '2017-09-03'],
    ['2017-09-15', '2017-10-15'],
    ['2017-10-27', '2017-11-12'],
    ['2017-11-17', '2017-11-26'],
    ['2017-12-08', '2017-12-31'],
    ['2018-01-01', '2018-02-04'],
    ['2018-02-16', '2018-02-25'],
    ['2018-03-02', '2018-03-18'],
    ['2018-03-29', '2018-05-07'],
    ['2018-05-11', '2018-05-20'],
    ['2018-06-01', '2018-06-17'],
    ['2018-06-29', '2018-08-12'],
    ['2018-08-24', '2018-09-09'],
    ['2018-09-21', '2018-10-14'],
    ['2018-10-26', '2018-11-11'],
    ['2018-11-16', '2018-11-25'],
    ['2018-12-07', '2018-12-31'],
    ['2019-01-01', '2019-02-11'],
    ['2019-02-15', '2019-02-17'],
    ['2019-02-22', '2019-04-01'],
    ['2019-04-04', '2019-07-01'],
    ['2019-07-05', '2019-07-21'],
    ['2019-07-26', '2019-07-28'],
    ['2019-08-02', '2019-09-08'],
    ['2019-09-13', '2019-09-15'],
    ['2019-09-20', '2019-10-13'],
    ['2019-10-18', '2019-10-20'],
    ['2019-10-25', '2019-11-10'],
    ['2019-11-15', '2019-11-24'],
    ['2019-11-29', '2019-12-01'],
    ['2019-12-06', '2019-12-31'],
    ['2020-01-01', '2020-02-03'],
    ['2020-02-07', '2020-02-09'],
    ['2020-02-14', '2020-02-23'],
    ['2020-02-28', '2020-03-01'],
    ['2020-03-06', '2020-03-22'],
    ['2020-03-24', '2020-04-07'],
    ['2020-04-09', '2020-05-11'],
    ['2020-05-15', '2020-06-09'],
    ['2020-06-13', '2020-06-14'],
    ['2020-06-19', '2020-08-23'],
    ['2020-08-28', '2020-08-30'],
    ['2020-09-04', '2020-10-05'],
    ['2020-10-09', '2020-10-18'],
    ['2020-10-23', '2020-10-25'],
    ['2020-10-30', '2020-11-08'],
    ['2020-11-13', '2020-11-29'],
    ['2020-12-04', '2020-12-06'],
    ['2020-12-11', '2020-12-31'],
    ['2021-01-01', '2021-02-01'],
    ['2021-02-05', '2021-02-14'],
    ['2021-02-19', '2021-02-21'],
    ['2021-02-26', '2021-03-14'],
    ['2021-03-19', '2021-03-21'],
    ['2021-03-26', '2021-05-10'],
    ['2021-05-14', '2021-05-31'],
    ['2021-06-04', '2021-06-14'],
    ['2021-06-18', '2021-06-20'],
    ['2021-06-25', '2021-08-02'],
    ['2021-08-06', '2021-08-08'],
    ['2021-08-13', '2021-08-22'],
    ['2021-08-27', '2021-08-29'],
    ['2021-09-03', '2021-10-17'],
    ['2021-10-22', '2021-10-24'],
    ['2021-10-29', '2021-11-21'],
    ['2021-11-26', '2021-11-28'],
    ['2021-12-03', '2021-12-31'],
    ['2022-01-01', '2022-02-07'],
    ['2022-02-11', '2022-02-13'],
    ['2022-02-18', '2022-03-27'],
    ['2022-04-01', '2022-04-10'],
    ['2022-04-12', '2022-07-25'],
    ['2022-07-29', '2022-07-31'],
    ['2022-08-05', '2022-09-04'],
    ['2022-09-09', '2022-09-22'],
    ['2022-09-24', '2022-09-25'],
    ['2022-09-29', '2022-10-24'],
    ['2022-10-28', '2022-11-06'],
    ['2022-11-11', '2022-11-20'],
    ['2022-11-26', '2022-11-27'],
    ['2022-12-02', '2022-12-14'],
    ['2022-12-16', '2022-12-31'],
    ['2023-01-01', '2023-02-05'],
    ['2023-02-10', '2023-02-12'],
    ['2023-02-17', '2023-03-05'],
    ['2023-03-10', '2023-03-19'],
    ['2023-03-25', '2023-03-26'],
    ['2023-03-31', '2023-05-08'],
    ['2023-05-12', '2023-05-21'],
    ['2023-05-26', '2023-05-29'],
    ['2023-06-02', '2023-06-12'],
    ['2023-06-17', '2023-06-18'],
    ['2023-06-23', '2023-07-30'],
    ['2023-08-04', '2023-08-06'],
    ['2023-08-11', '2023-09-03'],
    ['2023-09-08', '2023-09-10'],
    ['2023-09-15', '2023-10-15'],
    ['2023-10-20', '2023-10-22'],
    ['2023-10-27', '2023-11-05'],
    ['2023-11-11', '2023-11-12'],
    ['2023-11-18', '2023-11-26'],
    ['2023-12-01', '2023-12-03'],
    ['2023-12-08', '2023-12-31'],
    ['2024-01-01', '2024-02-05'],
    ['2024-02-09', '2024-02-11'],
    ['2024-02-16', '2024-02-25'],
    ['2024-03-01', '2024-03-17'],
    ['2024-03-22', '2024-03-24'],
    ['2024-03-29', '2024-05-13'],
    ['2024-05-17', '2024-05-27'],
    ['2024-05-31', '2024-06-02'],
    ['2024-06-07', '2024-06-23'],
    ['2024-06-28', '2024-06-30'],
    ['2024-07-05', '2024-08-11'],
    ['2024-08-16', '2024-08-18'],
    ['2024-08-23', '2024-09-08'],
    ['2024-09-13', '2024-09-15'],
    ['2024-09-20', '2024-10-07'],
    ['2024-10-11', '2024-11-03'],
    ['2024-11-08', '2024-11-17'],
    ['2024-11-22', '2024-11-24'],
    ['2024-11-29', '2024-12-31'],
    ['2025-01-01', '2025-02-03'],
    ['2025-02-07', '2025-02-09'],
    ['2025-02-14', '2025-03-24'],
    ['2025-03-28', '2025-07-21'],
    ['2025-07-25', '2025-07-27'],
    ['2025-08-01', '2025-08-24'],
    ['2025-08-29', '2025-08-31'],
    ['2025-09-05', '2025-10-06'],
    ['2025-10-10', '2025-10-26'],
    ['2025-10-31', '2025-11-02'],
    ['2025-11-07', '2025-11-23'],
    ['2025-11-28', '2025-12-31'],
    ['2026-01-01', '2026-02-02'],
    ['2026-02-06', '2026-02-08'],
    ['2026-02-13', '2026-03-01'],
    ['2026-03-06', '2026-03-09'],
    ['2026-03-13', '2026-03-22'],
    ['2026-03-27', '2026-03-29'],
    ['2026-04-02', '2026-05-11'],
    ['2026-05-15', '2026-05-24'],
    ['2026-05-29', '2026-06-01'],
    ['2026-06-05', '2026-06-21'],
    ['2026-06-26', '2026-06-28'],
    ['2026-07-03', '2026-08-10'],
    ['2026-08-14', '2026-08-16'],
    ['2026-08-21', '2026-09-06'],
    ['2026-09-11', '2026-09-13'],
    ['2026-09-18', '2026-10-11'],
    ['2026-10-16', '2026-10-25'],
    ['2026-10-30', '2026-11-15'],
    ['2026-11-20', '2026-11-22'],
    ['2026-11-27', '2026-12-31']
];

/**
 * Function currently_in_recess() {
 * Main file which recesswatcher.py overwrites each day.
 * $h = fopen(RECESSFILE, "r");
 * $today = date("Y-m-d");
 * while ($line = fgets($h)){
 * list($name, $from, $to) = split(",", $line);
 * if ($from <= $today and $today <= $to) {
 * return array($name, trim($from), trim($to));
 * }
 * }
 * Second manual override file.
 * $h = fopen(RECESSFILE.".extra", "r");
 * while ($line = fgets($h)){
 * list($name, $from, $to) = split(",", $line);
 * if ($from <= $today and $today <= $to) {
 * return array($name, trim($from), trim($to));
 * }
 * }
 * return false;
 * }
 */
function recess_prettify($day, $month, $year, $body) {
    global $recessdates;
    $dates = $recessdates[$body];
    foreach ($dates as $range) {
        $from = strptime($range[0], '%Y-%m-%d');
        $to = strptime($range[1], '%Y-%m-%d');
        $from_time = mktime(0, 0, 0, $from['tm_mon'] + 1, $from['tm_mday'], $from['tm_year'] + 1900);
        $to_time = mktime(0, 0, 0, $to['tm_mon'] + 1, $to['tm_mday'], $to['tm_year'] + 1900);
        $time = mktime(0, 0, 0, $month, $day, $year);
        if ($time >= $from_time && $time <= $to_time) {
            return ['recess', $range[0], $range[1]];
        }
    }
}
